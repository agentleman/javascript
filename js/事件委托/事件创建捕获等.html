<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style type="text/css">
	.box{
       padding: 40px;
       border:3px solid green;
	}
	.zhong{
		padding: 20px;
		border:2px solid black;
	}
	.xiao{
		padding: 10px;
		border:1px solid red;
	}
</style>
<body>
	<div class="box">
		<div class="zhong">
			<div class="xiao"></div>
		</div>
	</div>
</body>
<script type="text/javascript">
	var   box=document.getElementsByClassName('box')[0];
	var   zhong=document.getElementsByClassName('zhong')[0];
	var   xiao=document.getElementsByClassName('xiao')[0];

	 // xiao.addEventListener('click',function (e){
	 // 	console.log(xiao);
	 	
	 // });
	 //  zhong.addEventListener('click',function (e){
	 // 	console.log(zhong);
	 // 	e.stopPropagation();//阻止事件流动 这个事件以后的父元素都会被终止
	 // });
	 //   box.addEventListener('click',function (e){
	 // 	console.log(box);

	 // });

  // var  threeclick= new  Event('threeclick');
  // var  box=document.querySelector('.box');
  //  box.addEventListener('threeclick',function(){
  //         console.log('没想到吧我又回来了');
  //  });
  //  box.addEventListener('click',(function(){
  //  	    var cishu=0;
  //  	      return function(){
  //              cishu+=1;
  //              if (cishu===3) {
  //              	box.dispatchEvent(threeclick);
  //              }
  //              setTimeout(function(){
  //              	cishu=0;
  //              },500)
  //  	          }
  //  })());

  // var  fiveseconds= new Event('fiveseconds');
  // box.addEventListener('fiveseconds',function(){
  // 	console.log('没想到吧我又回来了');
  // });
  // var  timeId;
  // box.addEventListener('mousedown',(function(){
  // 	var i=0;
  // 	return function(){
  // 		timeId=setInterval(function(){
  // 			i+=1;
  // 			if(i==3){
  // 				box.dispatchEvent(fiveseconds);}	
  // 			},1000)
  // 	};
   	       // clearInterval(timeId)

   //    box.addEventListener('mousedown',(function(){
   // 	          return function(){
   // 	          	setInterval(function(){
   // 	          	box.dispatchEvent(fiveseconds);	
   // 	          	},3000);   	          	
   // 	          }           
// })());
 
   // var  clickHandler=function(){
   // 	this.style.background='red';
   // 	this.removeEventListener('click',clickHandler);
   // }
   // xiao.addEventListener('click',clickHandler);
  


   // var  longpress=new Event('longpress');
   // xiao.addEventListener('longpress',function(){
   // 	alert(3);
   // 	// xiao.dispatchEvent(longpress);
   // });

   // xiao.addEventListener('mousedown',function(){
   // 	var timeId=setTimeout(function(){
   // 		xiao.dispatchEvent(longpress)
   // 	},500);
   // 	document.addEventListener('mouseup',function(){
   // 		 clearTimeout(timeId)
   // 	})
   // });    
      

    var onlongpress=function(el,fn){//定义一个onlongpress函数，给el添加一个longpress事件
      var longpress=new Event('longpress');
      el.addEventListener('longpress',function(e){
   		//不要给自定义事件阻止冒泡   e.stopPropagation
   		fn.call(el,e)
   	});
    

    var timeId;
      el.addEventListener('mousedown',function(e){
        e.stopPropagation();
        var timeId=setTimeout(function(){
       el.dispatchEvent(longpress);       
      // fn.call(el,e) 
     },500);
      document.addEventListener('mouseup',function(e){
        clearTimeout(timeId);
         e.stopPropagation();
      })
    })
}
    onlongpress(zhong,function(e){
      console.log(this);
    });
     onlongpress(box,function(e){
      console.log(this);
    });
     onlongpress(xiao,function(e){
      console.log(this);
    });

// Arry.prototype.myForeach=function(fn){
// 	for (var i = 0; i < this.length; i++) {
// 		fn.call(this,this[i])
// 	}
// }
//   var  arr=[1,3,4,5]

//   arr.myForeach(function(v){
//   	console.log(this,v)
//   })

// Arry.prototype.myFilter=function(fn){
// 	var r=[];
// 	for (var i = 0; i < this.length; i++) {
// 		fn.call(this,this[i])
// 	}
// }
//   var  arr=[1,3,4,5]

//   arr.myFilter(function(v){
//   	console.log(this,v)
//   })

// var  arr=[];
// var  forEach=arr.forEach


</script>
</html>